


<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference - Bonsai</title>
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({  google: {    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]  }});</script>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />
	  <link href="../stylesheets/test.css" rel="stylesheet" media="screen" />
    <link href="../favicon.ico" rel="icon" type="image/ico" />
      <script src="../javascripts/all.js"></script>
      <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WVB6MG2');</script>
<!-- End Google Tag Manager -->
      <!-- start Mixpanel -->
<script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init("91fbf7b68fb2356f91916026f221ddd5", {
    loaded: function(mixpanel) {
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        distinct_id = getParameterByName('refUserId');
        if (distinct_id) {
          mixpanel.identify(distinct_id);
        }
    }
});</script>
<!-- end Mixpanel -->

  </head>

  <body class="references references_api-reference" data-languages="[]">


	  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WVB6MG2"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --> 

  <div id="flex-container">

	<nav id="primary-nav">



	<div id="logo"> <a href="../"><img class="bonsai-logo" src="../images/bonsai-logo.svg"></a></div>

	<label for="drop" class="toggle"><img class="menu-ham" src="../images/menu.svg"></label>
	<input type="checkbox" id="drop" />

	<ul class="menu">

		<li class="header_menu_item "> <a href="../guides/getting-started.html">Quick Start</a></li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-1" class="toggle">Tutorials +</label><a  href="#">Tutorials</a>
			<input type="checkbox" id="drop-1"/>
			<ul id="tutorials">
				<li class=""> <a href="../guides/cli-install-guide.html">Install the CLI</a>  </li>
				<li class=""> <a href="../guides/local-dev-guide.html">Use the CLI for Training</a>  </li>
				<li class=""> <a href="../guides/sdk-install-guide.html">Install the SDK</a>  </li>
				<li class=""> <a href="../tutorials/tutorial1.html">Running Simulations and Writing Inkling</a>  </li>
				<li class=""> <a href="../tutorials/simulink.html">Train a Simulink Model with Bonsai</a>  </li>
				<li class=""> <a href="../guides/jupyter-api-guide.html">Use Bonsai's API with Jupyter</a>  </li>
			</ul>
		</li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-2" class="toggle">Guides +</label><a  href="#">Guides</a>
			<input type="checkbox" id="drop-2"/>
			<ul id="guides">
				<li class=""> <a href="../guides/simulation-guide.html">Learn About Simulation Requirements</a>  </li>
				<li class=""> <a href="../guides/inkling-guide.html">Learn the Inkling Language</a>  </li>
				<li class=""> <a href="../guides/machine-teaching.html">Programming Machine Teaching</a>  </li>
				<li class=""> <a href="../guides/ai-engine-guide.html">Understand AI Engine Components</a>  </li>
				<li class=""> <a href="../guides/web-graphs-guide.html">Understand BRAIN Graphs</a>  </li>
			</ul>
		</li>

		<li class="header_menu_item"> <!-- First Tier Drop Down --> <label for="drop-3" class="toggle">References +</label><a  href="#">References</a>
			<input type="checkbox" id="drop-3"/>
			<ul id="references">
				<li class="selected"> <a href="api-reference.html">API Reference</a>  </li>
				<li class=""> <a href="cli-reference.html">CLI Reference</a>  </li>
				<li class=""> <a href="inkling-reference.html">Inkling Reference</a>  </li>
				<li class=""> <a href="simulator-reference.html">Simulator Reference</a>
				<li class=""> <a href="library-reference.html">Python Library</a>  </li>
				<li class=""> <a href="cpp-library-reference.html">C++ Library</a>  </li>
				
			</ul> 
		</li>

		<li class="header_menu_item "> <a href="../examples.html">Examples</a></li>

		<li>
			<input type="search" id="docs-search" placeholder="Search Bonsai Docs">
		</li>


	</ul>

</nav>


	<div id="main-wrapper">

    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">

        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div class="page-title">API Reference</div>
      <div id="toc">
      </div>

			 
<ul class="toc-footer">

<li><a href='https://bons.ai'>Bonsai Home</a></li>
<li><a href='https://beta.bons.ai'>BRAIN Dashboard</a></li>
<li><a href='https://github.com/BonsaiAI/slate'>Contribute to the Docs</a></li>
<li><a href='https://bons.ai/get-started'>Apply for Bonsai Platform Preview</a></li>
<li><a href="/releases.html">Product Release Notes</a></li>
<li><a href="/system-reqs.html">Official System Requirements</a></li>
<li><a href='https://bons.ai/contact-us#contact-page-form'>Contact Us</a></li>

</ul>


	   <div class="cc-bottom">
	
	<div class="toc-footer bottom cc-info">

		<a href='https://creativecommons.org/licenses/by-sa/4.0/' class="cc-icon-width" >
			<svg class="cc" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			viewBox="0 0 70.7 13.4" style="enable-background:new 0 0 70.7 13.4;" xml:space="preserve">

				<g>

				<g>
				<circle class="st0" cx="6.8" cy="6.7" r="6.1"/>
				<path d="M6.7,0c1.9,0,3.5,0.7,4.8,2c0.6,0.6,1.1,1.4,1.4,2.2c0.3,0.8,0.5,1.7,0.5,2.6c0,0.9-0.2,1.8-0.5,2.6
				c-0.3,0.8-0.8,1.5-1.4,2.1c-0.7,0.6-1.4,1.1-2.2,1.5c-0.8,0.3-1.7,0.5-2.6,0.5S5,13.3,4.2,12.9c-0.8-0.3-1.5-0.8-2.2-1.5
				s-1.1-1.4-1.5-2.2S0,7.6,0,6.7C0,5.8,0.2,5,0.5,4.2S1.3,2.6,2,2C3.3,0.7,4.8,0,6.7,0z M6.7,1.2c-1.5,0-2.8,0.5-3.9,1.6
				C2.3,3.4,1.9,4,1.6,4.6C1.4,5.3,1.2,6,1.2,6.7c0,0.7,0.1,1.4,0.4,2.1c0.3,0.7,0.7,1.3,1.2,1.8c0.5,0.5,1.1,0.9,1.8,1.2
				c0.7,0.3,1.4,0.4,2.1,0.4c0.7,0,1.4-0.1,2.1-0.4c0.7-0.3,1.3-0.7,1.8-1.2c1-1,1.6-2.3,1.6-3.9c0-0.7-0.1-1.4-0.4-2.1
				c-0.3-0.7-0.7-1.3-1.2-1.8C9.5,1.8,8.2,1.2,6.7,1.2z M6.6,5.6L5.7,6.1C5.6,5.9,5.5,5.7,5.4,5.6C5.3,5.6,5.1,5.5,5,5.5
				c-0.6,0-0.9,0.4-0.9,1.2c0,0.4,0.1,0.6,0.2,0.9C4.5,7.8,4.7,7.9,5,7.9c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4C6.5,8.1,6.2,8.3,5.9,8.5
				c-0.3,0.2-0.7,0.3-1,0.3c-0.6,0-1.1-0.2-1.5-0.6C3.1,7.9,2.9,7.4,2.9,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6
				C5.7,4.6,6.3,5,6.6,5.6z M10.5,5.6L9.6,6.1C9.5,5.9,9.4,5.7,9.3,5.6C9.1,5.6,9,5.5,8.9,5.5C8.3,5.5,8,5.9,8,6.7
				c0,0.4,0.1,0.6,0.2,0.9c0.2,0.2,0.4,0.3,0.7,0.3c0.4,0,0.7-0.2,0.8-0.6l0.8,0.4c-0.2,0.3-0.4,0.6-0.7,0.8c-0.3,0.2-0.7,0.3-1,0.3
				c-0.6,0-1.1-0.2-1.5-0.6C7,7.9,6.8,7.4,6.8,6.7c0-0.6,0.2-1.1,0.6-1.5c0.4-0.4,0.8-0.6,1.4-0.6C9.6,4.6,10.2,5,10.5,5.6z"/>
				</g>

				</g>
			</svg>
		</a>
		
		<a href='https://creativecommons.org/licenses/by-sa/4.0/'>Content:
		CC-BY-SA </a>
		
	</div>

</div>

    </div>

    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="api-overview">API Overview</h1>
<pre class="highlight plaintext"><code>#######################################################
# REST API request and response will be shown here    #
# protobuf messages will be shown here for Websockets #
#######################################################
</code></pre>
<p>The Bonsai Platform provides programmers and data scientists with a new way of
building sophisticated ML and AI applications. This API is at the core of how
programmers interact with the AI Engine.</p>

<p>The Bonsai BRAIN API has two feature areas:</p>

<ul>
<li>Managing BRAINS</li>
<li>Connecting simulators for training and use.</li>
</ul>

<p>The root for all Bonsai Platform API requests is <em>https://api.bons.ai</em>.</p>

<h1 id="authentication">Authentication</h1>

<p>API calls must include an Authorization header. The value of this header is your <a href="https://beta.bons.ai/accounts/key">Access Key</a>.</p>

<h4 id="headers">Headers</h4>

<table><thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Access key</td>
</tr>
</tbody></table>

<h1 id="user-and-brain-status">User and BRAIN Status</h1>

<h3 id="brain-versions">BRAIN Versions</h3>

<p>BRAIN versions numerically count up each time a BRAIN is trained. There is also
a <code class="prettyprint">latest</code> version that can be called if desired.</p>

<h3 id="brain-modes">BRAIN Modes</h3>

<p>BRAIN versions have the following modes:</p>

<ul>
<li><strong>ready_to_train:</strong> After Inkling is uploaded and successfully compiled, the
BRAIN version number is incremented. That particular version is in the
ready_to_train state. ready_to_train versions give predictions the same as or
worse than random.</li>
<li><strong>training:</strong> After the train command is given, the BRAIN version is
incremented and that version is in the training state. In this state the user
cannot load new Inkling into the BRAIN or restart training. The user must
cancel training to upload new Inkling.</li>
<li><strong>trained:</strong> If training is canceled or completed the BRAIN version is in
the trained state. Trained BRAIN versions can give predictions or receive more
training. version is NOT incremented upon training completion.</li>
</ul>

<h2 id="user-status">User Status</h2>

<p>Use GET to list all BRAINs owned by the user.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"brains"</span><span class="p">:</span><span class="w">  </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/Cartpole"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-19T00:19:46.857000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Started"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cartpole"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/MountainCar"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-21T18:33:17.676000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Complete"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MountainCar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/Starter"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-24T21:36:44.740000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"In Progress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Starter"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>URL of the BRAIN</td>
</tr>
<tr>
<td>version</td>
<td>Current version number of the BRAIN</td>
</tr>
<tr>
<td>last_modified</td>
<td>Text string of last modified date</td>
</tr>
<tr>
<td>state</td>
<td>Current status of training</td>
</tr>
<tr>
<td>name</td>
<td>Name of the BRAIN</td>
</tr>
</tbody></table>

<h2 id="brain-status">BRAIN Status</h2>

<p>Use GET for information about a BRAIN. This will return every URL for
every version of that BRAIN as well.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"versions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/Starter/2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/Starter/1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Basic example project."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kgmcauliffe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Starter"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>versions</td>
<td>Lists URL for every version of the BRAIN</td>
</tr>
<tr>
<td>description</td>
<td>Text description of the BRAIN</td>
</tr>
<tr>
<td>user</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>name</td>
<td>Name of the BRAIN</td>
</tr>
</tbody></table>

<h2 id="brain-status-websocket">BRAIN Status Websocket</h2>

<p>Use a websocket connection to get live updates about a BRAIN.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/ws'
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADD_DATA_POINT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"episode_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">34.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">120546</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lesson"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balancing"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PROPERTY_CHANGED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"status"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"In Progress"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONCEPTS_SET"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concepts"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Started"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"algorithm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DQN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"is_estimator"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}],</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONCEPT_CHANGED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"In Progress"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FILE_UPDATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartpole.ink"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c06edf7bc96dd461af1357a274734633b0ff2932"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<p>The websocket will send JSON messages for events in the BRAIN. Every message
will have a <code class="prettyprint">type</code> field which can be used to determine what the rest of the payload is.</p>

<p>There are 6 types of messages that are sent on this socket: <code class="prettyprint">ADD_DATA_POINT</code>,
<code class="prettyprint">PROPERTY_CHANGED</code>, <code class="prettyprint">CONCEPTS_SET</code>, <code class="prettyprint">CONCEPT_CHANGED</code>, <code class="prettyprint">FILE_UPDATED</code>,
<code class="prettyprint">FILES_UPDATED</code>, and <code class="prettyprint">TRAINING_INITIALIZED</code>.</p>

<h4 id="add_data_point">ADD_DATA_POINT</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metric</td>
<td>The data series for this data. This will be <code class="prettyprint">episode_value</code> for training data points and <code class="prettyprint">test_pass_value</code> for test data points</td>
</tr>
<tr>
<td>value</td>
<td>The reward value for an episode</td>
</tr>
<tr>
<td>episode</td>
<td>Which episode the value corresponds to</td>
</tr>
<tr>
<td>concept</td>
<td>The concept the value corresponds to</td>
</tr>
<tr>
<td>lesson</td>
<td>The lesson the value corresponds to</td>
</tr>
</tbody></table>

<h4 id="property_changed">PROPERTY_CHANGED</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>property</td>
<td>The property that has changed</td>
</tr>
<tr>
<td>value</td>
<td>The new value for this parameter</td>
</tr>
</tbody></table>

<h4 id="concepts_set">CONCEPTS_SET</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>concepts</td>
<td>An array of JSON per concept in the BRAIN. The JSON will include the concept&rsquo;s state, the algorithm that the concept will be trained with and whether the concept is an estimator or classifier</td>
</tr>
</tbody></table>

<h4 id="concept_changed">CONCEPT_CHANGED</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>concept</td>
<td>The concept that has changed</td>
</tr>
<tr>
<td>state</td>
<td>What the concept&rsquo;s state changed to</td>
</tr>
</tbody></table>

<h4 id="file_updated">FILE_UPDATED</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>filename</td>
<td>The file that has changed</td>
</tr>
<tr>
<td>hash</td>
<td>A hash of the file&rsquo;s content</td>
</tr>
</tbody></table>

<h4 id="files_updated">FILES_UPDATED</h4>

<p>This message has no extra data.</p>

<h4 id="training_initialized">TRAINING_INITIALIZED</h4>

<p>This message has no extra data.</p>

<h1 id="brain-metrics">BRAIN Metrics</h1>

<p>The metrics endpoints will return data from the specified version of a BRAIN&rsquo;s
training. They can be useful for analyzing what happened during training.</p>

<h2 id="episode-value">Episode Value</h2>

<p>Episode value contains data about each training episode for a given version of a BRAIN.
This represents what the AI has been rewarded and what it&rsquo;s currently learning
through simulation.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/{version}/metrics/episode_value
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>version</td>
<td>Version of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lesson"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balancing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">1354</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-10T06:37:11.712068096Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lesson"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balancing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">2784</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-10T06:37:11.739321856Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lesson"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balancing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">4184</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-10T06:37:11.769031936Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>The episode&rsquo;s cumulative reward value</td>
</tr>
<tr>
<td>episode</td>
<td>The episode for this value</td>
</tr>
<tr>
<td>iteration</td>
<td>Total number of simulator iterations that have occurred</td>
</tr>
<tr>
<td>time</td>
<td>Timestamp for when this value occurred</td>
</tr>
<tr>
<td>concept</td>
<td>The concept this value corresponds to</td>
</tr>
<tr>
<td>lesson</td>
<td>The lesson this value corresponds to</td>
</tr>
</tbody></table>

<h2 id="test-pass-value">Test Pass Value</h2>

<p>Test pass value contains data for test pass episodes that occur once every
20 training episodes during training for a given version of a BRAIN.
This value is representative of the AI’s performance at a regular interval of training.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/{version}/metrics/test_pass_value
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>version</td>
<td>Version of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lesson"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balancing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">5354</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-10T06:37:11.712068096Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lesson"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balancing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">10784</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-10T06:37:11.739321856Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lesson"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balancing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
    </span><span class="s2">"iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">16184</span><span class="p">,</span><span class="w">
    </span><span class="s2">"concept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-10T06:37:11.769031936Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>The episode&rsquo;s cumulative reward value</td>
</tr>
<tr>
<td>episode</td>
<td>The test pass episode for this value</td>
</tr>
<tr>
<td>iteration</td>
<td>Total number of simulator iterations that have occurred</td>
</tr>
<tr>
<td>time</td>
<td>Timestamp for when this value occurred</td>
</tr>
<tr>
<td>concept</td>
<td>The concept this value corresponds to</td>
</tr>
<tr>
<td>lesson</td>
<td>The lesson this value corresponds to</td>
</tr>
</tbody></table>

<h2 id="iterations">Iterations</h2>

<p>Iterations contains data for the number of iterations that have occurred in a
simulation and at what timestamp. This data gets logged about once every 100 iterations.
This can be useful for long episodes when other metrics may not be getting data.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/{version}/metrics/iterations
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>version</td>
<td>Version of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">134</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-22T19:40:47.631161088Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">267</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-22T19:40:48.393937152Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">374</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-22T19:40:49.018401024Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-22T19:40:49.508259072Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>Total number of simulator iterations that have occurred</td>
</tr>
<tr>
<td>time</td>
<td>Timestamp for when this value occurred</td>
</tr>
</tbody></table>

<h1 id="project-files">Project Files</h1>

<h2 id="retrieve-file">Retrieve File</h2>

<p>GET the contents of a specified project file, for example, the Inkling
code in the <em>.ink</em> file for a BRAIN.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}?file={fileName}
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>fileName</td>
<td>Full name of the file to get</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>The full text of the file will be returned in the body.</p>

<h2 id="change-file">Change File</h2>

<p>Uses the PUT request method to change a project file for the given
BRAIN. You cannot PUT new file contents while a BRAIN is training.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT /v1/{userName}/{brainName}?file={fileName}
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>fileName</td>
<td>Name of the file to be changed</td>
</tr>
</tbody></table>

<h4 id="headers">Headers</h4>

<table><thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content‐Type</td>
<td>Set to <code class="prettyprint">text/x-inkling</code> or <code class="prettyprint">text/plain</code> if not Inkling code</td>
</tr>
<tr>
<td>Content‐Length</td>
<td>Size of file in bytes</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"compiler_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.8.25"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"warnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>Whether the Inkling code was compiled successfully</td>
</tr>
<tr>
<td>errors</td>
<td>Compiler errors will be listed if there are any</td>
</tr>
<tr>
<td>compiler_version</td>
<td>Version of the compiler used</td>
</tr>
<tr>
<td>warnings</td>
<td>Compiler warnings will be listed if there are any</td>
</tr>
</tbody></table>

<p>This is an example response for an Inkling file with no errors or warnings to report.</p>

<h1 id="simulators">Simulators</h1>

<h2 id="simulator-information">Simulator Information</h2>

<p>GET information for a simulator connected to a BRAIN.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/sims
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"breakout"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"connected"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"instances"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
       </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ready_to_play"</span><span class="err">.</span><span class="w">
       </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
   </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Name of the simulator</td>
</tr>
<tr>
<td>connected</td>
<td>Count of how many simulators are connected</td>
</tr>
<tr>
<td>instances</td>
<td>Array of connected simulators with their status and episode count</td>
</tr>
</tbody></table>

<h2 id="simulator-logs-websocket">Simulator Logs Websocket</h2>

<p>Use the websocket connection to get real-time simulator messages during training.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/{brainVersion}/sims/1/logs/ws
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>brainVersion</td>
<td>Version of the BRAIN</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>The websocket will send one message for each log message (starting with the first
message logged in the simulator). This websocket will automatically close when
all log messages have been sent or training is complete.</p>

<h2 id="simulator-state">Simulator State</h2>

<p>Use a websocket to GET the state of values in the simulator during training.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET, /v1/{userName}/{brainName}/{brainVersion}/sims/1/state/ws'
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>brainVersion</td>
<td>Version of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
      </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
         </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> 
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"reward"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="s2">"angle"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1234</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02521</span><span class="w">
       </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<p>The websocket will send JSON messages for each state transition in the simulator.
The payload will have <code class="prettyprint">action</code>, <code class="prettyprint">reward</code>, and <code class="prettyprint">state</code> keys. The <code class="prettyprint">reward</code> value
will be the reward the simulator gives for this state transition. The <code class="prettyprint">action</code>
will be JSON with keys which correspond to the Inkling&rsquo;s action schema and the
<code class="prettyprint">state</code> will be JSON with keys corresponding to the Inkling&rsquo;s state schema.</p>

<h1 id="training">Training</h1>

<h2 id="start-stop-training">Start/Stop Training</h2>

<p>Use PUT to start or stop training.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT /v1/{userName}/{brainName}/train
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>Name of the BRAIN</td>
</tr>
</tbody></table>

<blockquote>
<p>Example JSON Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kgmcauliffe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"simulator_connect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/Starter/sims/ws"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Starter"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"simulator_predictions_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/Starter/1/predictions/ws"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"manage_simulator"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"compiler_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.8.25"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"brain_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/kgmcauliffe/Starter/1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td>Name of the user who has the BRAIN</td>
</tr>
<tr>
<td>simulator_connect_url</td>
<td>URL the simulator connects to for training</td>
</tr>
<tr>
<td>name</td>
<td>Name of the BRAIN</td>
</tr>
<tr>
<td>simulator_predictions_url</td>
<td>URL the simulator connects to for prediction</td>
</tr>
<tr>
<td>version</td>
<td>Current version number of the BRAIN</td>
</tr>
<tr>
<td>manage_simulator</td>
<td>Whether or not the simulator is managed</td>
</tr>
<tr>
<td>compiler_version</td>
<td>Version of the compiler used</td>
</tr>
<tr>
<td>brain_url</td>
<td>URL of the BRAIN</td>
</tr>
</tbody></table>

<h2 id="training-protocol">Training Protocol</h2>

<p>Connect to the server and upgrade to a websocket to initialize the training
protocol.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/sims/ws
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>name of the BRAIN</td>
</tr>
</tbody></table>

<h4 id="headers">Headers</h4>

<table><thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Upgrade</td>
<td>websocket</td>
</tr>
<tr>
<td>Connection</td>
<td>upgrade</td>
</tr>
</tbody></table>

<h3 id="protocol">Protocol</h3>

<blockquote>
<p>Simulator to Server</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">SimulatorToServer</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="n">MessageType</span> <span class="p">{</span>
        <span class="na">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="na">REGISTER</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="na">READY</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="na">STATE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">MessageType</span> <span class="na">message_type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Nested message data. Which of these fields is populated depends
</span>    <span class="c1">// upon the message type. Some message types do not have any
</span>    <span class="c1">// additional data.
</span>    <span class="n">RegisterData</span> <span class="na">register_data</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">repeated</span> <span class="n">SimulationSourceData</span> <span class="na">state_data</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">fixed32</span> <span class="na">sim_id</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Server to Simulator</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">ServerToSimulator</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="n">MessageType</span> <span class="p">{</span>
        <span class="na">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="na">ACKNOWLEDGE_REGISTER</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="na">SET_PROPERTIES</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="na">START</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
        <span class="na">STOP</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
        <span class="na">PREDICTION</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="na">RESET</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
        <span class="na">FINISHED</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">MessageType</span> <span class="na">message_type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Nested message data. Which of these fields is populated depends
</span>    <span class="c1">// upon the message type. Some message types do not have any
</span>    <span class="c1">// additional data.
</span>    <span class="n">AcknowledgeRegisterData</span> <span class="na">acknowledge_register_data</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">SetPropertiesData</span> <span class="na">set_properties_data</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">repeated</span> <span class="n">PredictionData</span> <span class="na">prediction_data</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Register</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">RegisterData</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">simulator_name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Acknowledge Register</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">AcknowledgeRegisterData</span> <span class="p">{</span>
    <span class="n">google.protobuf.DescriptorProto</span> <span class="na">properties_schema</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">google.protobuf.DescriptorProto</span> <span class="na">output_schema</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">google.protobuf.DescriptorProto</span> <span class="na">prediction_schema</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">fixed32</span> <span class="na">sim_id</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Set Properties</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">SetPropertiesData</span> <span class="p">{</span>
    <span class="kt">bytes</span> <span class="na">dynamic_properties</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">reward_name</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">google.protobuf.DescriptorProto</span> <span class="na">prediction_schema</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>State</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">SimulationSourceData</span> <span class="p">{</span>
    <span class="kt">bytes</span> <span class="na">state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">float</span> <span class="na">reward</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="na">terminal</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">bytes</span> <span class="na">action_taken</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Prediction</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">PredictionData</span> <span class="p">{</span>
    <span class="kt">bytes</span> <span class="na">dynamic_prediction</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p><img src="../images/training.svg" alt="Training Message Protocol" /></p>

<h1 id="prediction">Prediction</h1>

<h2 id="prediction-protocol">Prediction Protocol</h2>

<p>Connect to the server and upgrade to a websocket to initialize the prediction
protocol.</p>

<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /v1/{userName}/{brainName}/{version}/predictions/ws
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>userName</td>
<td>name of the user who has the BRAIN</td>
</tr>
<tr>
<td>brainName</td>
<td>name of the BRAIN</td>
</tr>
<tr>
<td>version</td>
<td>version of the BRAIN to get predictions from. Use &ldquo;latest&rdquo; for latest version</td>
</tr>
</tbody></table>

<h4 id="headers">Headers</h4>

<table><thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Upgrade</td>
<td>websocket</td>
</tr>
<tr>
<td>Connection</td>
<td>upgrade</td>
</tr>
</tbody></table>

<h3 id="protocol">Protocol</h3>

<blockquote>
<p>Simulator to Server</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">SimulatorToServer</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="n">MessageType</span> <span class="p">{</span>
        <span class="na">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="na">REGISTER</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="na">READY</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="na">STATE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">MessageType</span> <span class="na">message_type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Nested message data. Which of these fields is populated depends
</span>    <span class="c1">// upon the message type. Some message types do not have any
</span>    <span class="c1">// additional data.
</span>    <span class="n">RegisterData</span> <span class="na">register_data</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">repeated</span> <span class="n">SimulationSourceData</span> <span class="na">state_data</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">fixed32</span> <span class="na">sim_id</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Server to Simulator</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">ServerToSimulator</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="n">MessageType</span> <span class="p">{</span>
        <span class="na">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="na">ACKNOWLEDGE_REGISTER</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="na">SET_PROPERTIES</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="na">START</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
        <span class="na">STOP</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
        <span class="na">PREDICTION</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="na">RESET</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
        <span class="na">FINISHED</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">MessageType</span> <span class="na">message_type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Nested message data. Which of these fields is populated depends
</span>    <span class="c1">// upon the message type. Some message types do not have any
</span>    <span class="c1">// additional data.
</span>    <span class="n">AcknowledgeRegisterData</span> <span class="na">acknowledge_register_data</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">SetPropertiesData</span> <span class="na">set_properties_data</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">repeated</span> <span class="n">PredictionData</span> <span class="na">prediction_data</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Register</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">RegisterData</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">simulator_name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Acknowledge Register</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">AcknowledgeRegisterData</span> <span class="p">{</span>
    <span class="n">google.protobuf.DescriptorProto</span> <span class="na">properties_schema</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">google.protobuf.DescriptorProto</span> <span class="na">output_schema</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">google.protobuf.DescriptorProto</span> <span class="na">prediction_schema</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">fixed32</span> <span class="na">sim_id</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>State</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">SimulationSourceData</span> <span class="p">{</span>
    <span class="kt">bytes</span> <span class="na">state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">float</span> <span class="na">reward</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="na">terminal</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">bytes</span> <span class="na">action_taken</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Prediction</p>
</blockquote>
<pre class="highlight proto tab-protobuf"><code><span class="kd">message</span> <span class="nc">PredictionData</span> <span class="p">{</span>
    <span class="kt">bytes</span> <span class="na">dynamic_prediction</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p><img src="../images/prediction.svg" alt="Prediction Message Protocol" /></p>

      </div>
      <div class="dark-box">
      </div>
    </div>

    </div>

  </div>
  <!-- at the end of the BODY -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
  <script type="text/javascript"> docsearch({
  apiKey: '49fa6f01d7ff94a85b9b7434b1c2b7cf',
  indexName: 'bon-sai',
  inputSelector: '#docs-search',
  debug: false // Set debug to true if you want to inspect the dropdown
  });
  </script>
  </body>
</html>
